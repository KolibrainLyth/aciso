<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALF Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: #ffffff;
            min-height: 100vh;
            color: #1a1a1a;
            line-height: 1.6;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 16px;
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 32px;
            min-height: 100vh;
        }

        .header {
            grid-column: 1 / -1;
            text-align: center;
            margin-bottom: 32px;
            padding: 32px 0;
        }

        .header h1 {
            color: #1a1a1a;
            font-size: 2.5rem;
            font-weight: 800;
            letter-spacing: -0.02em;
            margin-bottom: 12px;
        }

        .select-all-btn {
            background: #3b82f6;
            color: #ffffff;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 16px;
        }

        .select-all-btn:hover {
            background: #2563eb;
        }

        .select-all-btn.selected {
            background: #dc2626;
        }

        .select-all-btn.selected:hover {
            background: #b91c1c;
        }

        .header p {
            color: #666666;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
            font-weight: 400;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            gap: 12px;
        }

        .logo-img {
            width: 40px;
            height: auto;
            border-radius: 8px;
            object-fit: contain;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1a1a1a;
            letter-spacing: -0.02em;
        }

        .main-content {
            background: #ffffff;
            border: 1px solid #e5e5e5;
            border-radius: 12px;
            padding: 24px;
            height: fit-content;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .cart-sidebar {
            background: #ffffff;
            border: 1px solid #e5e5e5;
            border-radius: 12px;
            padding: 28px;
            height: fit-content;
            position: sticky;
            top: 20px;
            color: #1a1a1a;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .cart-sidebar .cart-container {
            position: static;
            background: transparent;
            box-shadow: none;
            padding: 0;
            margin: 0;
            border: none;
        }

        .category {
            margin-bottom: 20px;
            border: 1px solid #e5e5e5;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.2s ease;
            background: #ffffff;
            will-change: transform;
            transform: translateZ(0);
        }

        .category:hover {
            border-color: #d1d5db;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .category-header {
            background: #f9fafb;
            color: #1a1a1a;
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
            border-bottom: 1px solid #e5e5e5;
            min-height: 44px;
        }

        .category-header:hover {
            background: #f3f4f6;
        }

        .category-title {
            font-size: 1.1rem;
            font-weight: 600;
            letter-spacing: -0.01em;
        }

        .category-description {
            font-size: 0.9rem;
            color: #6b7280;
            margin-top: 4px;
            font-weight: 400;
        }

        .category-toggle {
            font-size: 1.2rem;
            transition: transform 0.2s ease;
            color: #9ca3af;
        }

        .category-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
            will-change: max-height;
        }

        .category.expanded .category-content {
            padding: 20px;
            max-height: 2000px;
        }

        .category.expanded .category-toggle {
            transform: rotate(180deg);
        }

        .skill-item {
            display: flex;
            align-items: center;
            padding: 14px;
            margin-bottom: 6px;
            background: #ffffff;
            border-radius: 6px;
            border: 1px solid #e5e5e5;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .skill-item:hover {
            background: #f9fafb;
            border-color: #d1d5db;
        }

        .skill-item.selected {
            background: #f0f9ff;
            border-color: #3b82f6;
            box-shadow: 0 0 0 1px #3b82f6;
        }

        .skill-checkbox {
            width: 18px;
            height: 18px;
            margin-right: 16px;
            accent-color: #3b82f6;
            border-radius: 3px;
        }

        .skill-text {
            flex: 1;
            font-size: 0.85rem;
            line-height: 1.4;
            color: #374151;
        }

        .cart-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 24px;
            text-align: center;
            letter-spacing: -0.01em;
            color: #1a1a1a;
        }

        .cart-items {
            margin-bottom: 24px;
        }

        .cart-item {
            background: #f9fafb;
            padding: 16px;
            margin-bottom: 8px;
            border-radius: 8px;
            border: 1px solid #e5e5e5;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 4px;
            color: #1a1a1a;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .cart-item-category {
            font-size: 0.8rem;
            color: #6b7280;
            font-weight: 500;
        }

        .cart-item-price {
            font-weight: 700;
            color: #3b82f6;
            font-size: 1rem;
            margin-left: 16px;
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 8px;
            min-width: 80px;
            justify-content: flex-end;
        }

        .original-price {
            font-size: 0.8rem;
            color: #9ca3af;
            text-decoration: line-through;
            font-weight: 500;
            white-space: nowrap;
        }

        .final-price {
            color: #3b82f6;
            font-weight: 700;
            white-space: nowrap;
        }

        .cart-category-group {
            margin-bottom: 16px;
        }

        .cart-category-header {
            background: #f3f4f6;
            padding: 12px 16px;
            border-radius: 6px;
            margin-bottom: 12px;
            font-weight: 600;
            font-size: 0.9rem;
            color: #374151;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-category-count {
            background: #3b82f6;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .cart-summary {
            border-top: 2px solid #e5e5e5;
            padding-top: 24px;
            margin-top: 24px;
        }

        .cart-total {
            margin-bottom: 24px;
            color: #1a1a1a;
            padding: 16px;
            background: #f9fafb;
            border-radius: 6px;
            border: 1px solid #e5e5e5;
        }

        .cart-discount {
            background: #dcfce7;
            border: 1px solid #22c55e;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-discount-text {
            color: #166534;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .cart-discount-amount {
            color: #22c55e;
            font-weight: 700;
            font-size: 1rem;
        }

        .discount-progress-container {
            margin-bottom: 16px;
        }

        .discount-progress {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border: 1px solid #3b82f6;
            border-radius: 8px;
            padding: 12px;
            color: white;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .discount-progress-text {
            color: white;
            font-size: 0.9rem;
            margin-bottom: 8px;
            text-align: center;
            line-height: 1.3;
            font-weight: 600;
        }

        .discount-progress-bar {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
        }

        .discount-progress-fill {
            background: linear-gradient(90deg, #ffffff, #fbbf24);
            height: 100%;
            transition: width 0.3s ease;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
        }

        .cart-subtotal {
            display: flex;
            justify-content: space-between;
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: 8px;
            color: #6b7280;
            padding: 8px 0;
            border-bottom: 1px solid #e5e5e5;
        }

        .checkout-btn {
            width: 100%;
            background: #3b82f6;
            color: #ffffff;
            border: none;
            padding: 16px;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            letter-spacing: -0.01em;
            min-height: 48px;
        }

        .checkout-btn:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }

        .checkout-btn:disabled {
            background: #9ca3af;
            color: #6b7280;
            cursor: not-allowed;
            transform: none;
        }

        .empty-cart {
            text-align: center;
            color: #9ca3af;
            font-style: italic;
            padding: 32px 0;
            background: #f9fafb;
            border-radius: 6px;
            border: 1px solid #e5e5e5;
        }

        .footer {
            margin-top: 40px;
            padding: 20px 0;
            border-top: 1px solid #e5e5e5;
            background: #f9fafb;
        }

        .footer-content {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 16px;
            text-align: center;
        }

        .footer p {
            color: #6b7280;
            font-size: 0.9rem;
            margin: 0;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #ffffff;
            color: #1a1a1a;
            padding: 12px 16px;
            border-radius: 6px;
            border: 1px solid #e5e5e5;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
            font-weight: 500;
            font-size: 0.9rem;
            max-width: 300px;
            line-height: 1.4;
            will-change: transform;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #f0fdf4;
            border-color: #22c55e;
            color: #166534;
        }

        .notification.error {
            background: #fef2f2;
            border-color: #ef4444;
            color: #dc2626;
        }

        .notification.info {
            background: #eff6ff;
            border-color: #3b82f6;
            color: #1d4ed8;
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .cart-sidebar {
                position: static;
                order: -1;
            }

            .header h1 {
                font-size: 2.2rem;
            }

            .main-content {
                padding: 24px;
            }

            .category-header {
                padding: 20px;
            }

            .category-title {
                font-size: 1rem;
            }

            .skill-item {
                padding: 14px;
            }

            .skill-text {
                font-size: 0.85rem;
            }
        }

        @media (max-width: 375px) {
            .container {
                padding: 8px;
                gap: 16px;
            }

            .header {
                padding: 16px 0;
            }

            .header h1 {
                font-size: 1.8rem;
                margin-bottom: 8px;
            }

            .header p {
                font-size: 1rem;
            }

            .main-content {
                padding: 16px;
            }

            .cart-sidebar {
                padding: 16px;
            }

            .category-header {
                padding: 16px;
            }

            .category-title {
                font-size: 0.95rem;
            }

            .category-description {
                font-size: 0.85rem;
            }

            .skill-item {
                padding: 12px;
            }

            .skill-text {
                font-size: 0.8rem;
            }

            .price-tag {
                font-size: 0.75rem;
                padding: 4px 8px;
            }

            .cart-item {
                padding: 12px;
            }

            .cart-item-title {
                font-size: 0.9rem;
            }

            .cart-item-category {
                font-size: 0.75rem;
            }

            .cart-item-price {
                font-size: 0.9rem;
            }
        }

        @media (hover: none) {
            .skill-item {
                min-height: 44px;
            }

            .category-header {
                min-height: 44px;
            }

            .select-all-btn {
                min-height: 44px;
            }

            .checkout-btn {
                min-height: 48px;
            }
        }

        .price-tag {
            background: #333333;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 12px;
            color: #ffffff;
            border: 1px solid #666666;
        }

        .skill-price {
            color: #ffffff;
            font-weight: 600;
        }

        .required-skill {
            border-left: 4px solid #3b82f6;
            background: #f0f9ff;
            position: relative;
        }

        .required-skill:hover {
            background: #e0f2fe;
            cursor: pointer;
        }

        .required-skill.selected {
            background: #dbeafe;
            border-color: #2563eb;
        }

        .required-badge {
            background: #e0f2fe;
            color: #2563eb;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 12px;
            margin-left: 10px;
            display: inline-block;
            vertical-align: middle;
            letter-spacing: 0.2px;
            border: 1px solid #93c5fd;
        }

        .category-base-price {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 12px 16px;
            margin-bottom: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: #1e293b;
        }

        .base-price-label {
            font-size: 0.9rem;
            color: #64748b;
        }

        .base-price-amount {
            font-size: 1.1rem;
            color: #059669;
            font-weight: 700;
        }

        /* Improved animations */
        .category-content {
            transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .category.expanded .category-toggle {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .notification {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            body {
                background: #1a1a1a;
                color: #ffffff;
            }

            .category,
            .cart-sidebar,
            .main-content {
                background: #2d2d2d;
                border-color: #404040;
            }

            .category-header {
                background: #333333;
                color: #ffffff;
            }

            .skill-item {
                background: #2d2d2d;
                border-color: #404040;
            }

            .skill-item:hover {
                background: #333333;
            }

            .cart-item {
                background: #333333;
                border-color: #404040;
            }

            .price-tag {
                background: #404040;
                border-color: #505050;
            }

            .notification {
                background: #2d2d2d;
                border-color: #404040;
                color: #ffffff;
            }
        }

        .cart-container {
            position: sticky;
            top: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-top: 20px;
            transition: all 0.3s ease;
        }
        
        .cart-container.has-items {
            border: 1px solid #e0e0e0;
        }
        
        .cart-category {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .cart-category:last-child {
            border-bottom: none;
        }
        
        .cart-category h3 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 1.1em;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            margin: 5px 0;
            background: #f9f9f9;
            border-radius: 4px;
        }
        
        .cart-item.base-skill {
            background: #f0f7ff;
            border: 1px solid #cce5ff;
        }
        
        .base-skill-badge {
            font-size: 0.8em;
            padding: 2px 6px;
            background: #007bff;
            color: white;
            border-radius: 3px;
            margin: 0 8px;
        }

        .included-skill {
            background: #f9fafb;
            margin-left: 20px;
            padding: 8px 12px;
            border-left: 3px solid #e5e7eb;
        }

        .included-skill .skill-name {
            color: #6b7280;
            font-style: italic;
        }

        .included-skill .skill-price {
            color: #9ca3af;
        }
        
        .skill-name {
            flex: 1;
            margin-right: 10px;
        }
        
        .skill-price {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .cart-discount {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            margin: 10px 0;
            background: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: 4px;
            color: #856404;
        }
        
        .discount-amount {
            font-weight: 600;
        }
        
        .empty-cart {
            text-align: center;
            padding: 20px;
            color: #666;
            font-style: italic;
        }
        
        #cart-total {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #eee;
            text-align: right;
            font-size: 1.2em;
            font-weight: 700;
            color: #2c3e50;
        }
        
        @media (prefers-color-scheme: dark) {
            .cart-container {
                background: #1a1a1a;
                border-color: #333;
            }
            
            .cart-category {
                border-color: #333;
            }
            
            .cart-category h3 {
                color: #fff;
            }
            
            .cart-item {
                background: #2a2a2a;
            }
            
            .cart-item.base-skill {
                background: #1a2733;
                border-color: #234;
            }

            .included-skill {
                background: #2a2a2a;
                border-left-color: #555;
            }

            .included-skill .skill-name {
                color: #999;
            }

            .included-skill .skill-price {
                color: #777;
            }
            
            .skill-price {
                color: #89a;
            }
            
            .cart-discount {
                background: #332b1a;
                border-color: #443322;
                color: #bb9;
            }
            
            .empty-cart {
                color: #999;
            }
            
            #cart-total {
                border-color: #333;
                color: #89a;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <img src="4yJWX6TaZj9J.jpeg" alt="KOLIBRAIN Logo" class="logo-img">
                <span class="logo-text"></span>
            </div>
            <h1>ALF Generator</h1>
            <p>Wähle die Skills aus, die Alf für dein Fitnessstudio benötigt</p>
        </div>

        <div class="main-content">
            <div id="skill-categories"></div>
        </div>

        <div class="cart-sidebar">
            <div class="cart-container">
                <div class="cart-title">Warenkorb</div>
                <div id="cart-content">
                    <p class="empty-cart">Ihr Warenkorb ist leer</p>
                </div>
                <div id="cart-total">€0</div>
                <div class="cart-summary">
                    <button id="checkout-btn" class="checkout-btn" disabled>
                        Jetzt buchen
                    </button>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 KOLIBRAIN™. Alle Rechte vorbehalten.</p>
        </div>
    </footer>

    <div id="notification" class="notification"></div>

    <script>
        const skillCategories = {
            "MAGICLINE-OPTIMIERUNG": {
                description: "Hol endlich alles aus deiner Magicline-Investition raus",
                skills: [
                    "Newsletter-Automation: Alf setzt Parameter und löst den Versand vorbereiteter Newsletter in Magicline automatisch aus.",
                    "Automatisierte Mitgliedererfassung: Alf fügt neue Mitglieder nahtlos in Magicline ein, ohne menschliche Eingriffe.",
                    "Kündigungsverarbeitung: Alf bestätigt über mySports eingereichte Kündigungen direkt in Magicline, eliminiert manuelle Prozesse.",
                    "Stilllegungsverarbeitung: Alf bestätigt Stilllegungen in Magicline, reduziert manuellen Aufwand.",
                    "Proaktives Mahnwesen: Alf initiiert Mahnverfahren bei ausstehenden Beiträgen in Magicline.",
                    "Berechtigungswesen: Alf automatisiert die Einrichtung von Benutzerrechten für Rollen in Magicline selbstständig und sicher.",
                    "Studio-Website-Integration: Alf automatisiert die Einrichtung der Studio-Website in Magicline.",
                    "Automatisiertes Reporting: Alf generiert Auswertungen zu Mitgliederbewegungen für einen kontinuierlichen Überblick.",
                    "Qualitätsmanagement: Alf hält Mitgliederdaten kontinuierlich aktuell und geprüft."
                ]
            },
            "SUPPORT & HELPDESK": {
                description: "Professioneller Kundensupport auf Autopilot",
                skills: [
                    "Ticket-basiertes Kundenfeedback-System: Alf verarbeitet Kundenmails automatisch und erstellt Support-Tickets.",
                    "Automatisiertes E-Mail-Response-System: Alf antwortet zeitnah auf Mitgliederanfragen ohne manuellen Eingriff.",
                    "Mail-Integrationssystem: Alf erfasst eingehende Kündigungen direkt in Magicline.",
                    "Website-Chatbot: Alf beantwortet Kundenfragen automatisch auf der Website.",
                    "Chatbot-basierte Abfragesysteme: Automatisierte Beantwortung fachlicher Fragestellungen durch Analyse des Datenbestands.",
                    "Individuelle Push-Benachrichtigungen: Alf sendet zielgerichtete Benachrichtigungen über die MySports-App."
                ]
            },
            "MITGLIEDERBINDUNG": {
                description: "Verhindert Kündigungen bevor sie passieren",
                skills: [
                    "Automatisiertes Kündigungsrückgewinnungs-Board: Alf richtet ein strukturiertes Management für eingehende Kündigungen in Magicline ein.",
                    "Mitglieder-Inaktivitätsanalyse: Alf identifiziert inaktive Mitglieder und initiiert gezielte Reaktivierungsmaßnahmen.",
                    "Automatisches Rückgewinnungssystem: Alf identifiziert gekündigte Mitglieder und schlägt gezielte Rückgewinnungsaktionen vor.",
                    "Service-Call-Automation: Alf erinnert automatisch an Nachfassanrufe nach Mitgliedschaftsabschlüssen.",
                    "Mitgliederbetreuungsautomatisierung: Systemgestützte Koordination von Mitglieder-Aufgaben wie Check-Up Terminvereinbarungen.",
                    "Zufriedenheits-Tracking: Alf führt automatische Umfragen nach Käufen oder Trainings durch.",
                    "Trainingsanalyse: Alf analysiert das Trainingsverhalten und die -frequenz der Mitglieder.",
                    "Treueprogramm-Management: Alf belohnt engagierte Mitglieder mit maßgeschneiderten Bonusaktionen."
                ]
            },
            "SALES & MARKETING": {
                description: "Verkauft mehr ohne dass du verkaufen musst",
                skills: [
                    "Leadmanagement: Alf richtet das Leadmanagement zur Überwachung und Steuerung des Fortschritts von Leads in Magicline ein.",
                    "Advanced Leadmanagement: Integrierte Kommunikationsplanung zur Anleitung von Mitarbeitern.",
                    "Digitale Mitgliederkommunikation: Alf versendet elektronische Mitgliederbriefe ohne Portokosten direkt über Magicline.",
                    "Co-Pilot für Landingpages: Alf automatisiert die Erstellung von Landingpages für Marketingaktionen basierend auf vorgegebenen Daten.",
                    "Zielgruppenspezifische Marketing-Automation: Alf passt Marketingaktionen individuell an Kundensegmente an.",
                    "Freunde-Werben-Freunde: Alf richtet das Empfehlungsprogramm für Mitglieder automatisiert ein.",
                    "Netzwerkanalytik für Bring-a-Friend-Kampagnen: Alf erkennt Muster in Community-Interaktionen."
                ]
            },
            "FINANCE & ANALYTICS": {
                description: "Automatisierte Buchhaltung und intelligente Analysen",
                skills: [
                    "Automatische Beitragszuordnung: Alf ordnet eingehende Beiträge basierend auf Mustern automatisch zu.",
                    "KPI-Analysen: Alf wertet Kennzahlen zu Mitgliedern, Check-Ins, Verträgen, Finanzen und Aktivitäten aus.",

                    "Intelligentes Bestandsmanagement: Alf überwacht und steuert den Bestand und löst bei Bedarf Bestellanfragen proaktiv aus.",
                    "Verkaufsanalytik: Detaillierte Analyse von F&B-Verkaufszahlen zur Erkennung von Trends und Optimierung des Sortiments.",
                    "Echtzeitanalyse von Verkaufsempfehlungen: Alf gibt basierend auf Mitgliedsvorlieben F&B-Empfehlungen."
                ]
            }
        };

        // Pricing structure
        const skillPricing = {
            "MAGICLINE-OPTIMIERUNG": 590,
            "SUPPORT & HELPDESK": 590,
            "MITGLIEDERBINDUNG": 590,
            "SALES & MARKETING": 590,
            "FINANCE & ANALYTICS": 590
        };

        // Additional skill pricing (per skill, excluding required skill)
        const additionalSkillPricing = 99;

        // Required skills for each category (must be selected if any skill from that category is selected)
        const requiredSkills = {
            "MAGICLINE-OPTIMIERUNG": "Automatisierte Mitgliedererfassung: Alf fügt neue Mitglieder nahtlos in Magicline ein, ohne menschliche Eingriffe.",
            "SUPPORT & HELPDESK": "Ticket-basiertes Kundenfeedback-System: Alf verarbeitet Kundenmails automatisch und erstellt Support-Tickets.",
            "MITGLIEDERBINDUNG": "Automatisiertes Kündigungsrückgewinnungs-Board: Alf richtet ein strukturiertes Management für eingehende Kündigungen in Magicline ein.",
            "SALES & MARKETING": "Leadmanagement: Alf richtet das Leadmanagement zur Überwachung und Steuerung des Fortschritts von Leads in Magicline ein.",
            "FINANCE & ANALYTICS": "KPI-Analysen: Alf wertet Kennzahlen zu Mitgliedern, Check-Ins, Verträgen, Finanzen und Aktivitäten aus."
        };

        let selectedSkills = new Set();
        let cartItems = [];
        let total = 0;
        const categoryTotals = {};
        let currentNotificationTimeout;

        function generateSkillId(category, skill) {
            // Create a more consistent ID by using the skill text
            const cleanSkill = skill.replace(/[^a-zA-Z0-9äöüÄÖÜß]/g, '').substring(0, 50);
            return `${category}-${cleanSkill}`;
        }

        function createCategoryElement(category, data) {
            const categoryDiv = document.createElement('div');
            categoryDiv.className = 'category';
            categoryDiv.setAttribute('role', 'region');
            categoryDiv.setAttribute('aria-label', category);
            
            const headerHtml = `
                <div class="category-header" role="button" tabindex="0" aria-expanded="false" aria-controls="${category}-content">
                    <div>
                        <div class="category-title">${category}</div>
                        <div class="category-description">${data.description}</div>
                    </div>
                    <div class="category-toggle" aria-hidden="true">▼</div>
                </div>
                <div class="category-content" id="${category}-content" role="region" aria-hidden="true">
                    <div class="category-base-price" role="text" aria-label="Kategorie Basispreis">
                        <span class="base-price-label">Kategorie-Basis:</span>
                        <span class="base-price-amount">€${skillPricing[category].toLocaleString('de-DE')}</span>
                    </div>
                    <button class="select-all-btn" role="button" aria-label="Alle Skills in dieser Kategorie auswählen">Alle auswählen</button>
                    ${data.skills.map((skill, idx) => {
                        const isRequired = requiredSkills[category] === skill;
                        const skillId = generateSkillId(category, skill);
                        return `
                            <div class="skill-item ${isRequired ? 'required-skill' : ''}" 
                                 role="checkbox" 
                                 aria-checked="false"
                                 tabindex="0"
                                 aria-required="${isRequired}"
                                 data-skill-id="${skillId}"
                                 aria-label="${skill}${isRequired ? ' (Basis-Skill)' : ''}">
                                <input type="checkbox" 
                                       class="skill-checkbox" 
                                       id="${skillId}" 
                                       ${isRequired ? 'data-required-skill="true"' : ''}>
                                <label for="${skillId}" class="skill-text">
                                    ${skill}
                                    ${isRequired ? '<span class="required-badge" role="note">Basis-Skill</span>' : ''}
                                </label>
                                <div class="price-tag" aria-label="Preis">${isRequired ? `€${skillPricing[category].toLocaleString('de-DE')}` : `€${additionalSkillPricing}`}</div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
            
            categoryDiv.innerHTML = headerHtml;
            
            // Add event listeners after DOM elements are created
            const header = categoryDiv.querySelector('.category-header');
            header.addEventListener('click', () => toggleCategory(categoryDiv));
            header.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleCategory(categoryDiv);
                }
            });
            
            const selectAllBtn = categoryDiv.querySelector('.select-all-btn');
            selectAllBtn.addEventListener('click', (event) => toggleAllSkills(category, event));
            
            const skillItems = categoryDiv.querySelectorAll('.skill-item');
            skillItems.forEach(item => {
                const checkbox = item.querySelector('.skill-checkbox');
                const skillId = item.dataset.skillId;
                const isRequired = checkbox.hasAttribute('data-required-skill');
                
                // Handle click and keyboard events on the skill item
                item.addEventListener('click', (e) => {
                    if (e.target !== checkbox) {
                        e.preventDefault();
                        checkbox.click();
                    }
                });
                
                item.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        checkbox.click();
                    }
                });
                
                        checkbox.addEventListener('change', () => {
            const skillText = item.querySelector('.skill-text').textContent.trim();
            console.log('Skill checkbox changed:', category, skillText, 'ID:', skillId, 'Checked:', checkbox.checked);
            
            // Direkt die selectedSkills aktualisieren ohne toggleSkill aufzurufen
            if (checkbox.checked) {
                selectedSkills.add(skillId);
                item.classList.add('selected');
                item.setAttribute('aria-checked', 'true');
                console.log('Added skill, selectedSkills now:', Array.from(selectedSkills));
                if (selectedSkills.size > 1) {
                    showNotification('Skill hinzugefügt', 'success');
                }
            } else {
                // Prüfung für Basis-Skills
                const isRequired = checkbox.hasAttribute('data-required-skill');
                if (isRequired) {
                    const hasOtherSkillsFromCategory = Array.from(selectedSkills).some(selectedId => {
                        const [selectedCategory] = selectedId.split('-');
                        return selectedCategory === category && selectedId !== skillId;
                    });
                    
                    if (hasOtherSkillsFromCategory) {
                        showNotification('Entferne zuerst die anderen Skills dieser Kategorie', 'error');
                        checkbox.checked = true;
                        return;
                    }
                }
                
                selectedSkills.delete(skillId);
                item.classList.remove('selected');
                item.setAttribute('aria-checked', 'false');
                console.log('Removed skill, selectedSkills now:', Array.from(selectedSkills));
                if (selectedSkills.size > 0) {
                    showNotification('Skill entfernt', 'error');
                }
            }
            
            updateCart();
            updateSelectAllButton(category);
        });
            });
            
            return categoryDiv;
        }

        // Debounce helper function
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Throttle helper function
        function throttle(func, limit) {
            let inThrottle;
            return function(...args) {
                if (!inThrottle) {
                    func.apply(this, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            };
        }

        // Optimized category expansion
        function toggleCategory(categoryElement) {
            const isExpanded = categoryElement.classList.contains('expanded');
            const header = categoryElement.querySelector('.category-header');
            const content = categoryElement.querySelector('.category-content');
            
            requestAnimationFrame(() => {
                categoryElement.classList.toggle('expanded');
                header.setAttribute('aria-expanded', !isExpanded);
                content.setAttribute('aria-hidden', isExpanded);
            });
        }

        // Optimized cart update
        const debouncedUpdateCart = debounce(updateCart, 150);

        // Optimized skill toggle


        function toggleAllSkills(category, event) {
            event.stopPropagation();
            const categoryElement = event.target.closest('.category');
            const selectAllBtn = event.target;
            const skillItems = categoryElement.querySelectorAll('.skill-item');
            const isAllSelected = Array.from(skillItems).every(item => 
                item.classList.contains('selected')
            );
            
            if (isAllSelected) {
                // Alle abwählen
                skillItems.forEach(item => {
                    const checkbox = item.querySelector('.skill-checkbox');
                    const skillId = checkbox.id;
                    selectedSkills.delete(skillId);
                    item.classList.remove('selected');
                    checkbox.checked = false;
                });
                selectAllBtn.textContent = 'Alle auswählen';
                selectAllBtn.classList.remove('selected');
                showNotification(`${skillItems.length} Skills abgewählt`, 'error');
            } else {
                // Alle auswählen
                skillItems.forEach(item => {
                    const checkbox = item.querySelector('.skill-checkbox');
                    const skillId = checkbox.id;
                    selectedSkills.add(skillId);
                    item.classList.add('selected');
                    checkbox.checked = true;
                });
                selectAllBtn.textContent = 'Alle abwählen';
                selectAllBtn.classList.add('selected');
                showNotification(`${skillItems.length} Skills ausgewählt`, 'success');
            }
            
            updateCart();
        }

        function updateSelectAllButton(category) {
            // Find category element by looking for the category title
            const categoryElements = document.querySelectorAll('.category');
            let categoryElement = null;
            
            for (let element of categoryElements) {
                const titleElement = element.querySelector('.category-title');
                if (titleElement && titleElement.textContent === category) {
                    categoryElement = element;
                    break;
                }
            }
            
            if (!categoryElement) return;
            
            const selectAllBtn = categoryElement.querySelector('.select-all-btn');
            const skillItems = categoryElement.querySelectorAll('.skill-item');
            const isAllSelected = Array.from(skillItems).every(item => 
                item.classList.contains('selected')
            );
            
            if (isAllSelected) {
                selectAllBtn.textContent = 'Alle abwählen';
                selectAllBtn.classList.add('selected');
            } else {
                selectAllBtn.textContent = 'Alle auswählen';
                selectAllBtn.classList.remove('selected');
            }
        }

        function updateRequiredSkillVisuals() {
            console.log('updateRequiredSkillVisuals called');
            // Update visual state of required skills based on other selected skills in their category
            Object.entries(requiredSkills).forEach(([category, requiredSkill]) => {
                const requiredSkillId = generateSkillId(category, requiredSkill);
                console.log(`Checking required skill for ${category}:`, requiredSkillId);
                const requiredSkillElement = document.getElementById(requiredSkillId);
                console.log('Found element:', requiredSkillElement);
                
                if (requiredSkillElement) {
                    const skillItem = requiredSkillElement.parentElement;
                    // Check if other skills from this category are selected
                    const hasOtherSkillsFromCategory = Array.from(selectedSkills).some(selectedId => {
                        const [selectedCategory] = selectedId.split('-');
                        return selectedCategory === category && selectedId !== requiredSkillId;
                    });
                    
                    console.log(`Has other skills from ${category}:`, hasOtherSkillsFromCategory);
                    console.log(`Required skill selected:`, selectedSkills.has(requiredSkillId));
                    
                    if (hasOtherSkillsFromCategory && selectedSkills.has(requiredSkillId)) {
                        // Lock the required skill if other skills from category are selected
                        console.log(`Locking required skill for ${category}`);
                        skillItem.classList.add('locked');
                        requiredSkillElement.disabled = true;
                    } else if (!hasOtherSkillsFromCategory && selectedSkills.has(requiredSkillId)) {
                        // Unlock the required skill only if no other skills from category are selected
                        console.log(`Unlocking required skill for ${category}`);
                        skillItem.classList.remove('locked');
                        requiredSkillElement.disabled = false;
                    } else {
                        // Keep disabled if not selected
                        console.log(`Keeping required skill disabled for ${category}`);
                        skillItem.classList.remove('locked');
                        requiredSkillElement.disabled = true;
                    }
                } else {
                    console.log(`Required skill element not found for ${category}:`, requiredSkillId);
                }
            });
        }

        function updateCart() {
            const cartContent = document.getElementById('cart-content');
            const cartTotal = document.getElementById('cart-total');
            const cartContainer = document.querySelector('.cart-container');
            const checkoutBtn = document.getElementById('checkout-btn');
            
            if (selectedSkills.size === 0) {
                cartContent.innerHTML = '<p class="empty-cart">Ihr Warenkorb ist leer</p>';
                cartTotal.textContent = '€0';
                if (cartContainer) cartContainer.classList.remove('has-items');
                if (checkoutBtn) checkoutBtn.disabled = true;
                return;
            }
            
            if (cartContainer) cartContainer.classList.add('has-items');
            if (checkoutBtn) checkoutBtn.disabled = false;
            
            // Sammle Skills nach Kategorien und berechne Preise korrekt
            const categorizedSkills = {};
            const categoryPrices = {};
            let totalPrice = 0;
            
            selectedSkills.forEach(skillId => {
                console.log('Processing skillId:', skillId);
                
                // Versuche alle Kategorien um das richtige Match zu finden
                let foundCategory = null;
                let foundSkill = null;
                
                for (const [categoryName, categoryData] of Object.entries(skillCategories)) {
                    for (const skill of categoryData.skills) {
                        const generatedId = generateSkillId(categoryName, skill);
                        if (generatedId === skillId) {
                            foundCategory = categoryName;
                            foundSkill = skill;
                            break;
                        }
                    }
                    if (foundCategory) break;
                }
                
                console.log('Found category:', foundCategory, 'skill:', foundSkill);
                
                if (foundCategory && foundSkill) {
                    if (!categorizedSkills[foundCategory]) {
                        categorizedSkills[foundCategory] = {
                            baseSkill: null,
                            additionalSkills: [],
                            hasAnySkill: false
                        };
                        categoryPrices[foundCategory] = 0;
                    }
                    
                    categorizedSkills[foundCategory].hasAnySkill = true;
                    
                    const checkbox = document.getElementById(skillId);
                    const isRequired = checkbox && checkbox.hasAttribute('data-required-skill');
                    
                    if (isRequired) {
                        categorizedSkills[foundCategory].baseSkill = foundSkill;
                    } else {
                        categorizedSkills[foundCategory].additionalSkills.push(foundSkill);
                    }
                } else {
                    console.error('Could not find category/skill for ID:', skillId);
                }
            });
            
            // Berechne Preise pro Kategorie
            Object.entries(categorizedSkills).forEach(([category, skills]) => {
                if (skills.hasAnySkill) {
                    // Jede Kategorie mit mindestens einem Skill kostet den Basispreis
                    categoryPrices[category] = skillPricing[category];
                    totalPrice += skillPricing[category];
                    
                    // Plus zusätzliche Skills
                    const additionalPrice = skills.additionalSkills.length * additionalSkillPricing;
                    categoryPrices[category] += additionalPrice;
                    totalPrice += additionalPrice;
                }
            });
            
            // Berechne Rabatt (5% pro 5 Skills auf den Gesamtpreis)
            const discountGroups = Math.floor(selectedSkills.size / 5);
            const discountAmount = totalPrice * (discountGroups * 0.05);
            const finalPrice = totalPrice - discountAmount;
            
            // Generiere HTML für den Warenkorb
            let cartHtml = '';
            
            Object.entries(categorizedSkills).forEach(([category, skills]) => {
                if (skills.hasAnySkill) {
                    cartHtml += `<div class="cart-category">
                        <h3>${category}</h3>`;
                    
                    // Zeige Kategorie-Basis mit enthaltenem Basis-Skill
                    const baseSkillName = skills.baseSkill ? skills.baseSkill : 'Basis-Funktionen';
                    cartHtml += `
                        <div class="cart-item base-skill">
                            <span class="skill-name">Kategorie-Basis</span>
                            <span class="base-skill-badge">Basis-Preis</span>
                            <span class="skill-price">€${skillPricing[category].toLocaleString('de-DE')}</span>
                        </div>`;
                    
                    // Zeige enthaltenen Basis-Skill nur wenn vorhanden
                    if (skills.baseSkill) {
                        cartHtml += `
                            <div class="cart-item included-skill">
                                <span class="skill-name">${baseSkillName} (enthalten)</span>
                                <span class="skill-price">€0</span>
                            </div>`;
                    }
                    
                    // Zeige zusätzliche Skills
                    skills.additionalSkills.forEach(skill => {
                        cartHtml += `
                            <div class="cart-item">
                                <span class="skill-name">${skill.split(':')[0]}</span>
                                <span class="skill-price">€${additionalSkillPricing}</span>
                            </div>`;
                    });
                    
                    cartHtml += '</div>';
                }
            });
            
            if (discountAmount > 0) {
                cartHtml += `
                    <div class="cart-discount">
                        <span>Rabatt (${discountGroups} × 5% = ${discountGroups * 5}%)</span>
                        <span class="discount-amount">-€${Math.round(discountAmount).toLocaleString('de-DE')}</span>
                    </div>`;
            }
            
            if (cartContent) cartContent.innerHTML = cartHtml;
            if (cartTotal) cartTotal.textContent = `€${Math.round(finalPrice).toLocaleString('de-DE')}`;
        }

        // Optimized notification system
        const showNotification = throttle((message, type = 'success') => {
            const notification = document.getElementById('notification');
            
            if (currentNotificationTimeout) {
                clearTimeout(currentNotificationTimeout);
            }
            
            requestAnimationFrame(() => {
                notification.classList.remove('show');
                void notification.offsetWidth;
                
                notification.textContent = message;
                notification.className = `notification ${type}`;
                notification.setAttribute('role', 'alert');
                notification.setAttribute('aria-live', 'polite');
                notification.classList.add('show');
            });
            
            currentNotificationTimeout = setTimeout(() => {
                requestAnimationFrame(() => {
                    notification.classList.remove('show');
                });
                currentNotificationTimeout = null;
            }, 2000);
        }, 300);

        function checkout() {
            if (cartItems.length === 0) return;
            
            const discountGroups = Math.floor(selectedSkills.size / 5);
            const subtotal = cartItems.reduce((sum, item) => sum + item.price, 0);
            const discount = discountGroups * (subtotal * 0.05);
            const finalTotal = subtotal - discount;
            
            const discountText = discount > 0 ? ` (inkl. €${Math.round(discount).toLocaleString('de-DE')} Rabatt)` : '';
            const message = `Buchung erfolgreich! ${cartItems.length} Skills für €${Math.round(finalTotal).toLocaleString('de-DE')}${discountText} gebucht.`;
            showNotification(message);
            
            // Reset cart
            selectedSkills.clear();
            cartItems = [];
            updateCart();
            
            // Uncheck all checkboxes
            document.querySelectorAll('.skill-checkbox').forEach(checkbox => {
                checkbox.checked = false;
                checkbox.parentElement.classList.remove('selected');
            });
            
            // Reset select all buttons
            document.querySelectorAll('.select-all-btn').forEach(btn => {
                btn.textContent = 'Alle auswählen';
                btn.classList.remove('selected');
            });
        }

        // Initialize with performance optimizations
        function init() {
            const categoriesContainer = document.getElementById('skill-categories');
            
            // Create a document fragment to minimize reflows
            const fragment = document.createDocumentFragment();
            
            Object.entries(skillCategories).forEach(([category, data]) => {
                const categoryElement = createCategoryElement(category, data);
                fragment.appendChild(categoryElement);
            });
            
            // Append all categories at once
            categoriesContainer.appendChild(fragment);
            
            // Expand first category after a frame
            requestAnimationFrame(() => {
                const firstCategory = categoriesContainer.firstElementChild;
                if (firstCategory) {
                    firstCategory.classList.add('expanded');
                    const header = firstCategory.querySelector('.category-header');
                    const content = firstCategory.querySelector('.category-content');
                    header.setAttribute('aria-expanded', 'true');
                    content.setAttribute('aria-hidden', 'false');
                }
            });
            
            document.getElementById('checkout-btn').addEventListener('click', checkout);
        }

        // Start the application
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html> 
